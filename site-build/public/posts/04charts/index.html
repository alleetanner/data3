<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>4 • Getting started with charts - Graphical Data Apps</title><meta name="Description" content=""><meta property="og:title" content="4 • Getting started with charts" />
<meta property="og:description" content="At the end of the last section, our running Python file creates a page, lays out a couple of components. In this section, we will be bringing data into the app, and creating our first visualisation.
Bringing our data into the script We will be using pandas to read our CSV file in. While we do not use pandas any further in this course, keep in mind that streamlit is very much built with pandas in mind." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://alleetanner.github.io/graphical-data-apps/posts/04charts/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-14T00:00:00+01:00" />
<meta property="article:modified_time" content="2023-02-22T17:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="4 • Getting started with charts"/>
<meta name="twitter:description" content="At the end of the last section, our running Python file creates a page, lays out a couple of components. In this section, we will be bringing data into the app, and creating our first visualisation.
Bringing our data into the script We will be using pandas to read our CSV file in. While we do not use pandas any further in this course, keep in mind that streamlit is very much built with pandas in mind."/>
<meta name="application-name" content="Graphical Data Apps">
<meta name="apple-mobile-web-app-title" content="Graphical Data Apps"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://alleetanner.github.io/graphical-data-apps/posts/04charts/" /><link rel="prev" href="https://alleetanner.github.io/graphical-data-apps/posts/03layout/" /><link rel="next" href="https://alleetanner.github.io/graphical-data-apps/posts/05widgets/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/graphical-data-apps/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "4 • Getting started with charts",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/alleetanner.github.io\/graphical-data-apps\/posts\/04charts\/"
        },"genre": "posts","wordcount":  803 ,
        "url": "https:\/\/alleetanner.github.io\/graphical-data-apps\/posts\/04charts\/","datePublished": "2023-02-14T00:00:00+01:00","dateModified": "2023-02-22T17:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Alastair Tanner"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/graphical-data-apps/" title="Graphical Data Apps"><span class="header-title-pre"><i class="fa-solid fa-cube"></i> </i><i class="fa-brands fa-python"></i></span>  Graphical Data Apps in Python</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="https://alleetanner.github.io/code-teaching/" title="Courses" rel="noopener noreffer" target="_blank"> All courses </a><a class="menu-item" href="/graphical-data-apps/posts"> Sections </a><a class="menu-item" href="/graphical-data-apps/about"> About </a><a class="menu-item" href="https://github.com/alleetanner/graphical-data-apps" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/graphical-data-apps/" title="Graphical Data Apps"><span class="header-title-pre"><i class="fa-solid fa-cube"></i> </i><i class="fa-brands fa-python"></i></span>  Graphical Data Apps in Python</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="https://alleetanner.github.io/code-teaching/" title="Courses" rel="noopener noreffer" target="_blank">All courses</a><a class="menu-item" href="/graphical-data-apps/posts" title="">Sections</a><a class="menu-item" href="/graphical-data-apps/about" title="">About</a><a class="menu-item" href="https://github.com/alleetanner/graphical-data-apps" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">4 • Getting started with charts</h1><h2 class="single-subtitle">How to control your graphing library.</h2><div class="post-meta">
            <div class="post-meta-line"></div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#bringing-our-data-into-the-script">Bringing our data into the script</a>
      <ul>
        <li><a href="#loading-up-pandas">Loading up <code>pandas</code></a></li>
        <li><a href="#viewing-our-data">Viewing our data</a></li>
      </ul>
    </li>
    <li><a href="#creating-a-chart">Creating a chart</a>
      <ul>
        <li><a href="#a-basic-scatter-plot">A basic scatter plot</a></li>
        <li><a href="#section-title">Section title</a></li>
        <li><a href="#another-section">Another section</a></li>
        <li><a href="#exercise">Exercise</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>At the end of the last section, our running Python file creates a page, lays out a couple of components. In this section, we will be bringing data into the app, and creating our first visualisation.</p>
<h2 id="bringing-our-data-into-the-script">Bringing our data into the script</h2>
<p>We will be using <code>pandas</code> to read our CSV file in. While we do not use <code>pandas</code> any further in this course, keep in mind that <code>streamlit</code> is very much built with <code>pandas</code> in mind. Most of Streamlit data workflows and visualisations will expect to be working with dataframes, and this is the case now too.</p>
<h3 id="loading-up-pandas">Loading up <code>pandas</code></h3>
<p>Firstly, we need to update our <code>import</code>s to include everything we need for the rest of this course. We will add both <code>pandas</code> and <code>plotly.express</code>, so we will have three <code>import</code>s in total, at the top of our script, with their conventional aliases, <code>st</code>, <code>pd</code> and <code>px</code> respectively:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
</span></span></code></pre></div><p>Now that we have <code>pandas</code> ready for use, we can read our dataset into a dataframe. We are using the dataset provided in the course materials, <code>demo_dataset.csv</code>, which will need to be in your working folder. Add this line <strong>at the top of your script, below your <code>import</code>s</strong>. The reason we put it near the top is because this code is not related to building the interface, so it is logical to place it before the page-build code.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="n">demo_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;demo_dataset.csv&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h3 id="viewing-our-data">Viewing our data</h3>
<p>Before we go any further, let&rsquo;s examine what is inside our dataframe. We can do this natively in Streamlit. Building on your script at the <strong>end</strong> of the script, add this to the end:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="n">st</span><span class="o">.</span><span class="n">dataframe</span><span class="p">(</span><span class="n">demo_df</span><span class="p">)</span>
</span></span></code></pre></div><p>Save the file, and have a look at the browser tab displaying your app. We can now see what we are working with - note that this dataframe is interactive, so it can be ordered and selected, but we will not be covering interactive dataframes today.</p>
<p>We don&rsquo;t want to see this all the time, so we are going to add a checkbox to control this. (We cover <a href="ZXXXX" rel="">widgets</a>
 in more depth in the next section, but right now we want to add a toggle.) Go to your code block starting <code>with st.sidebar:</code>, and inside this block (ie, indented) add</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="n">df_view</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&#34;View dataframe&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>Here we are assigning the state of the checkbox to a variable called <code>df_view</code>. In Streamlit, a checkbox is a boolean, so it can only be <code>True</code> or <code>False</code>. We will use this value to trigger if Streamlit shows us the dataframe, by putting our <code>st.dataframe(demo_df)</code> into a conditional block. Find your line <code>st.dataframe(demo_df)</code>, and pop it into a conditional block:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="k">if</span> <span class="n">df_view</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">st</span><span class="o">.</span><span class="n">dataframe</span><span class="p">(</span><span class="n">demo_df</span><span class="p">)</span>
</span></span></code></pre></div><p>Save this, and give it a test in the browser window.</p>
<h2 id="creating-a-chart">Creating a chart</h2>
<p>Now that we have our data available, we can begin work on visualising it. As mentioned, we are using <a href="https://plotly.com/python/" target="_blank" rel="noopener noreffer">Plotly</a>
, for a number of reasons:</p>
<ul>
<li>it has an intermediate learning curve</li>
<li>the <a href="https://plotly.com/python-api-reference/" target="_blank" rel="noopener noreffer">documentation</a>
 is good</li>
<li>the syntax is easy to use, without being over-simplified</li>
<li>the graphs it creates are good-looking, customisable and interactive.</li>
</ul>
<p>There are two steps to getting our data from the dataframe to into a graphic:</p>
<ol>
<li>Creating a chart object</li>
<li>Asking Streamlit to present this chart object</li>
</ol>
<h3 id="a-basic-scatter-plot">A basic scatter plot</h3>
<p>Plotly works on dataframes, which we have ready for it. We will build up to a more sophisticated visualisation later, but as an absolute minimum, a Plotly scatter chart needs three things:</p>
<ol>
<li>The datafame Plotly is working with</li>
<li>The data to plot on the <code>x</code> axis (ie, one of the dataframe columns)</li>
<li>The data to plot on the <code>y</code> axis (another dataframe column)</li>
</ol>
<p>For points [2] and [3], we need to choose two columns to plot. Set your dataframe to be displayed (using the checkbox we made earlier). Let&rsquo;s choose the columns <code>Life expectancy</code> as our <code>x</code>, and <code>GDP per capita</code> as our <code>y</code>.
We create our chart object like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="n">chart</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">data_frame</span><span class="o">=</span><span class="n">demo_df</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">x</span><span class="o">=</span><span class="s2">&#34;Life expectancy&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">y</span><span class="o">=</span><span class="s2">&#34;GDP per capita&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p>Note that my indentation here is just to avoid a long, confusing line of code; anything inside brackets and separated by commas can be laid out in this way, and you will see later that our chart object can have lots of arguments, so it is good practice to keep this tidy!</p>
<p>OK, so we have built the <code>chart</code> object - now we ask Streamlit to show it to us by handing it to <code>st.plotly_chart()</code>. Add this at the bottom of your script:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="n">st</span><span class="o">.</span><span class="n">plotly_chart</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
</span></span></code></pre></div><p>Save your file, and explore the visual! Investigate what the icons at the top right of your chart do.</p>
<h3 id="section-title">Section title</h3>
<ul>
<li>bullet1</li>
<li>bullt2</li>
</ul>
<p>Normal text body.</p>
<p><div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw" aria-hidden="true"></i>Warning<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>Warning1</li>
<li>Warning2</li>
</ul>
</div>
        </div>
    </div>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw" aria-hidden="true"></i>Info<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>Info1</li>
<li>Info2</li>
</ul>
</div>
        </div>
    </div></p>
<h3 id="another-section">Another section</h3>
<p>blahfdajkfhu aefuibahj rwefyugr</p>
<pre tabindex="0"><code>code goes herer
</code></pre><p>next setion blakfahuir wrafguighbarg</p>
<h3 id="exercise">Exercise</h3>
<div class="details admonition question open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-question-circle fa-fw" aria-hidden="true"></i>Questions<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>a question box</p>
<ul>
<li>q1</li>
<li>q2</li>
</ul>
</div>
        </div>
    </div>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span></span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/graphical-data-apps/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/graphical-data-apps/posts/03layout/" class="prev" rel="prev" title="3 • Getting started with layout"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>3 • Getting started with layout</a>
            <a href="/graphical-data-apps/posts/05widgets/" class="next" rel="next" title="5 • Widgets and charts">5 • Widgets and charts<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.98.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/graphical-data-apps/" target="_blank">Alastair Tanner</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/copy-tex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script type="text/javascript" src="/graphical-data-apps/js/theme.min.js"></script></body>
</html>
